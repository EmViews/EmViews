<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>testtesttest</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<div class="container">
    <div class="row">
        <div class="col-xl-4" id="search-result">
        </div>
    </div>
</div>

<body>
    <!-- Retrieved data will be dumped here -->
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript" src="mainSite.js"></script>
    <script type="text/javascript">
    console.log(response);
    console.log(siteResponse);
    for (var i = 0; i < response.items.length; i++) {
        //need to grab UPC, image, title
        //searchItem div have Title link,
        var searchItem = $("<div class='searchItem' id='item'>");

        var title = $("<div class='titleItem canClick'>").html("<h4>" + response.items[i].title + "</h4>");
        title.attr("title", response.items[i].title);
        title.attr("upc", response.items[i].upc);
        title.attr("ean", response.items[i].ean);

        var image = $("<img class='imageItem canClick'>").attr("src", response.items[i].images[0]);
        image.attr("title", response.items[i].title);
        image.attr("upc", response.items[i].upc);
        image.attr("ean", response.items[i].ean);

        console.log(response.items[i].ean);
        //adding all the variables together
        searchItem.append(image).append(title);
        $("#search-result").append(searchItem);
    }

    $(document).on("click", ".canClick", function() {

        if ($(this).attr("upc") == null || $(this).attr("upc") == "") {
            console.log("I got ean");
            code = $(this).attr("ean");
        } else {
            console.log("I got upc");
            code = $(this).attr("upc");
        }



        //run another Ajax
        // var queryUPC = "https://api.upcitemdb.com/prod/trial/lookup?upc=" + code;
        // $.ajax({
        //         url: queryUPC,
        //         method: "GET"
        //     })
        //     // We store all of the retrieved data inside of an object called "response"
        //     .done(function(siteResponse) {

                
        //     });

    });

            console.log("Last Line");
        console.log(siteResponse.items[0].title);
    // var article = $("<div>").attr("class", "article");
    // var title = $("<div class='title'>").html("<span>" + (i + 1) + " </span>" + response.response.docs[i].headline.main);
    // var author = $("<div class='info'>").html(response.response.docs[i].byline);
    // var section = $("<div class='info'>").html("Section: " + response.response.docs[i].section_name);
    // var date = $("<div class='info'>").html(response.response.docs[i].pub_date);
    // var link = $("<div class='link'>").html("<a href='" + response.response.docs[i].web_url + "'>" + response.response.docs[i].web_url + "</a>");
    // article.append(title).append(author).append(section).append(date).append(link);
    // $(".articles").append(article);
    </script>
</body>

</html>
